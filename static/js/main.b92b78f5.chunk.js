(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{121:function(e,t,a){},133:function(e,t,a){},141:function(e,t,a){},142:function(e,t,a){},148:function(e,t,a){},150:function(e,t,a){},155:function(e,t,a){},169:function(e,t,a){},170:function(e,t,a){},171:function(e,t,a){},172:function(e,t,a){},174:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(20),c=a.n(o),s=(a(98),a(11)),l=a(12),i=a(14),u=a(13),d=a(15),m=a(61),p=a(33),f=a(87),h=function(e){var t=e.component,a=e.authed,n=Object(f.a)(e,["component","authed"]);return r.a.createElement(p.b,Object.assign({},n,{render:function(e){return a?r.a.createElement(t,e):r.a.createElement(p.a,{to:"/login"})}}))};var y=a(23),v=a(10),b=a.n(v),E=a(29),g="LOGIN_USER",O="GET_ACTIVE_USER",j="AUTHENTICATION_ERROR",w="LOGIN_SUCCESS",C="LOGOUT_USER",k="LOGOUT_SUCCESS",D="https://secret-ridge-01197.herokuapp.com",N=a(30),S=a.n(N),I=a(24),U=Object(I.a)();var _=function(){setTimeout(function(){localStorage.removeItem("token"),U.push("/login")},36e5)};function A(){return function(){var e=Object(E.a)(b.a.mark(function e(t){var a;return b.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,S.a.get("".concat(D,"/user"),{headers:{Authorization:"".concat(localStorage.getItem("token"))}});case 3:a=e.sent,t({type:w}),t({type:O,payload:a.data}),e.next=10;break;case 8:e.prev=8,e.t0=e.catch(0);case 10:case"end":return e.stop()}},e,null,[[0,8]])}));return function(t){return e.apply(this,arguments)}}()}var T=a(64),L=a.n(T),x=a(179),G=a(180),F=a(181),R=a(186),M=(a(121),function(e){function t(){return Object(s.a)(this,t),Object(i.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props,t=e.caloriesIn,a=e.activeUser,n=a.caloriesGoal,o=function(e,t){return Math.floor(e/t*100)}(t,n),c=a.username+", keep eating to reach your goal.";return r.a.createElement(x.a,null,r.a.createElement(G.a,null,r.a.createElement(F.a,null,r.a.createElement(L.a,{variant:"info"},"Calories in: ",t," kcal")),r.a.createElement(F.a,null,r.a.createElement(L.a,{variant:o>=100?"success":"danger"},r.a.createElement("span",null,"Goal: ",r.a.createElement("span",null,n," kcal"))))),r.a.createElement(R.a,{variant:o>=100&&o<130?(c="Congratulations "+a.username+" You have reached the goal.","success"):o>=130?(c="Careful "+a.username+"! You had too much food today.","danger"):"info",className:"progressBar",now:o,label:o+"%"}),r.a.createElement("p",null,c))}}]),t}(n.Component)),Y=a(31),B=a(89),z=a.n(B),P=a(44),X=a.n(P),V=a(8),K=a.n(V),H=a(185),J=(a(133),function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={foodName:"",foodCalories:0,error:""},a.onSubmit=function(e){e.preventDefault();var t=a.props.dayId,n={foodName:a.state.foodName,foodCalories:a.state.foodCalories,dayId:t};""===a.state.foodName?a.setState({error:"Name field cannot be empty."}):(a.props.addFood(n),a.props.addDayCaloriesIn(n),a.setState({foodName:"",foodCalories:0,error:""}))},a.onChange=function(e){return a.setState(Object(Y.a)({},e.target.name,e.target.value))},a}return Object(d.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return r.a.createElement(K.a,{onSubmit:this.onSubmit},r.a.createElement(z.a,null,r.a.createElement(X.a,null,r.a.createElement(K.a.Group,null,r.a.createElement(K.a.Label,null,"Food Name:"),r.a.createElement(K.a.Control,{value:this.state.foodName,type:"text",name:"foodName",onChange:this.onChange}),r.a.createElement("span",null,this.state.error))),r.a.createElement(X.a,null,r.a.createElement(K.a.Group,null,r.a.createElement(K.a.Label,null,"Calories (kcal):"),r.a.createElement(K.a.Control,{value:this.state.foodCalories,type:"number",name:"foodCalories",onChange:this.onChange}))),r.a.createElement(X.a,null,r.a.createElement(H.a,{variant:"success",block:!0,type:"submit",className:"addFoodBtn"},"Add"))))}}]),t}(n.Component)),W=Object(y.b)(null,{addFood:function(e){return function(){var t=Object(E.a)(b.a.mark(function t(a){var n,r;return b.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n={foodName:e.foodName,calories:e.foodCalories,dayId:e.dayId},t.prev=1,t.next=4,S.a.post("".concat(D,"/food"),n,{headers:{Authorization:"".concat(localStorage.getItem("token"))}});case 4:r=t.sent,a({type:"ADD_FOOD",payload:r.data}),t.next=10;break;case 8:t.prev=8,t.t0=t.catch(1);case 10:case"end":return t.stop()}},t,null,[[1,8]])}));return function(e){return t.apply(this,arguments)}}()},addDayCaloriesIn:function(e){return function(){var t=Object(E.a)(b.a.mark(function t(a){return b.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:a({type:"ADD_CALORIES",payload:e});case 1:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()}})(J),$=a(182),q=(a(141),function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).deleteFood=function(e){a.props.deleteFoodById(e.id),a.props.subtractDayCaloriesIn(e)},a}return Object(d.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){this.props.getFood()}},{key:"render",value:function(){var e=this,t=this.props,a=t.dayId,n=t.food;return r.a.createElement("div",null,r.a.createElement($.a,null,r.a.createElement("tbody",null,n.map(function(t){return t.dayId===a?r.a.createElement("tr",{key:t.id},r.a.createElement("td",{className:"border-right"},r.a.createElement("label",null,t.foodName)),r.a.createElement("td",{className:"caloriesTd"},r.a.createElement("label",null,t.calories," kcal")),r.a.createElement("td",{className:"removeFoodBtnTd"},r.a.createElement(H.a,{className:"removeFoodBtn",variant:"danger",onClick:function(){return e.deleteFood(t)}},"X"))):console.log("Food with Day id:"+a+" is not found")}))))}}]),t}(n.Component)),Q=Object(y.b)(function(e){return{food:e.food.food}},{getFood:function(){return function(){var e=Object(E.a)(b.a.mark(function e(t){var a;return b.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S.a.get("".concat(D,"/food/user"),{headers:{Authorization:"".concat(localStorage.getItem("token"))}});case 2:a=e.sent,t({type:"GET_FOOD",payload:a.data});case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()},deleteFoodById:function(e){return function(){var t=Object(E.a)(b.a.mark(function t(a){var n;return b.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,S.a.delete("".concat(D,"/food/").concat(e),{headers:{Authorization:"".concat(localStorage.getItem("token"))}});case 2:n=t.sent,a({type:"DELETE_FOOD",payload:n.data});case 4:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()},subtractDayCaloriesIn:function(e){return function(){var t=Object(E.a)(b.a.mark(function t(a){return b.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:a({type:"SUBTRACT_CALORIES",payload:e});case 1:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()}})(q),Z=a(48),ee=a.n(Z),te=a(49),ae=a.n(te),ne=(a(142),function(e){function t(){return Object(s.a)(this,t),Object(i.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props.dayId;return r.a.createElement("div",null,r.a.createElement(ee.a,{defaultActiveKey:"1"},r.a.createElement(ae.a,null,r.a.createElement(ee.a.Toggle,{as:ae.a.Header,eventKey:"0"},"Add Food"),r.a.createElement(ee.a.Collapse,{eventKey:"0"},r.a.createElement(ae.a.Body,null,r.a.createElement(W,{dayId:e}))))),r.a.createElement(Q,{dayId:e}))}}]),t}(n.Component)),re=(a(148),a(50)),oe=a.n(re),ce=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).getDate=function(e){return oe()(e).format("MMMM Do YYYY")===oe()().format("MMMM Do YYYY")?"Today":oe()(e).format("MMMM Do YYYY")},a}return Object(d.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props.day,t=e.id,a=e.date,n=e.caloriesIn,o=this.props.activeUser;return console.log(),r.a.createElement("div",null,r.a.createElement(G.a,{className:"dayNavigation"},r.a.createElement(F.a,null,r.a.createElement("h3",null,this.getDate(a)))),r.a.createElement(M,{caloriesIn:n,activeUser:o}),r.a.createElement(ne,{dayId:t}))}}]),t}(n.Component),se=a(65),le=a.n(se),ie=(a(150),function(e){function t(){return Object(s.a)(this,t),Object(i.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){this.props.getActiveUser()}},{key:"componentDidUpdate",value:function(e){if(this.props.activeUser!==e.activeUser){var t=this.props.activeUser.id;this.props.getDays(t)}}},{key:"render",value:function(){var e=this.props,t=e.days,a=e.activeUser;return r.a.createElement(r.a.Fragment,null,r.a.createElement(le.a,{wrap:!1,indicators:!1,interval:null},t.map(function(e){return r.a.createElement(le.a.Item,{key:e.id},r.a.createElement(ce,{key:e.id,day:e,activeUser:a}))})))}}]),t}(n.Component)),ue=Object(y.b)(function(e){return{days:e.days.days,activeUser:e.users.activeUser}},{getDays:function(e){return function(){var t=Object(E.a)(b.a.mark(function t(a){var n;return b.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,S.a.get("".concat(D,"/days/user/").concat(e),{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}});case 2:n=t.sent,a({type:"GET_DAYS",payload:n.data});case 4:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()},getActiveUser:A})(ie),de=a(184),me=a(183),pe=(a(155),function(e){function t(){return Object(s.a)(this,t),Object(i.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement(x.a,{className:"container"},r.a.createElement(G.a,null,r.a.createElement(F.a,null,r.a.createElement("h1",null,r.a.createElement("span",{className:"titleDailyPart"},"Daily"),"Calories")),r.a.createElement(F.a,{className:"logoutCol"},r.a.createElement(H.a,{className:"logoutButton",onClick:function(){e.props.logOutUser()}},"Logout"),r.a.createElement(de.a,{placement:"bottom",delay:{hide:400},overlay:r.a.createElement(me.a,null,"A new day will be automatically created for the next day.")},r.a.createElement("i",{className:"fas fa-info-circle fa-2x"})))),r.a.createElement("hr",null))}}]),t}(n.Component)),fe=Object(y.b)(function(e){return{auth:e.auth}},{logOutUser:function(){return function(){var e=Object(E.a)(b.a.mark(function e(t){return b.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:try{localStorage.removeItem("token"),U.push("/login"),t({type:C}),t({type:k})}catch(a){}case 1:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()}})(pe),he=(a(169),function(e){function t(){return Object(s.a)(this,t),Object(i.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return r.a.createElement(x.a,{className:"dashboardContainer"},r.a.createElement(fe,null),r.a.createElement(ue,null))}}]),t}(n.Component)),ye=a(46),ve=a.n(ye),be=(a(170),function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={username:"",password:"",error:""},a.onSubmit=function(e){e.preventDefault();var t=a.state,n=t.username,r=t.password;a.props.loginUser(n,r),a.setState({username:"",password:""})},a.getError=function(){if(""===a.state.error){var e=a.props.error;""!==e&&a.setState({error:e})}},a.onChange=function(e){return a.setState(Object(Y.a)({},e.target.name,e.target.value))},a}return Object(d.a)(t,e),Object(l.a)(t,[{key:"componentDidUpdate",value:function(){this.getError()}},{key:"render",value:function(){var e=this.state,t=e.username,a=e.password;return r.a.createElement(x.a,{className:"loginContainer"},r.a.createElement("h1",{className:"mainTitle"},r.a.createElement("span",{className:"titleDailyPart"},"Daily"),"Calories"),r.a.createElement("h3",{className:"subtitle"},"Login:"),r.a.createElement(K.a,{className:"loginForm",onSubmit:this.onSubmit},r.a.createElement(K.a.Group,null,r.a.createElement(K.a.Control,{type:"text",name:"username",placeholder:"username",onChange:this.onChange,value:t})),r.a.createElement(K.a.Group,null,r.a.createElement(K.a.Control,{type:"password",name:"password",placeholder:"password",onChange:this.onChange,value:a})),r.a.createElement(ve.a,{className:"loginButton",size:"lg",variant:"primary",type:"submit"},"Login"),r.a.createElement("span",{className:"error"},this.state.error)),r.a.createElement("a",{className:"registerLink",href:"/register"},"Not registered? Click here to register now."))}}]),t}(n.Component)),Ee=Object(y.b)(function(e){return{activeUser:e.users.activeUser,error:e.users.error}},{loginUser:function(e,t){return function(){var a=Object(E.a)(b.a.mark(function a(n){var r;return b.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,S.a.post("".concat(D,"/login"),{username:e,password:t});case 3:r=a.sent,n({type:g}),n({type:w}),localStorage.setItem("token",r.headers.authorization),U.push("/"),_(),a.next=14;break;case 11:a.prev=11,a.t0=a.catch(0),n({type:j,payload:"Invalid username or password"});case 14:case"end":return a.stop()}},a,null,[[0,11]])}));return function(e){return a.apply(this,arguments)}}()},getActiveUser:A})(be),ge=(a(171),function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={username:"",password:"",passwordTwo:"",caloriesGoal:"",errors:{}},a.onSubmit=function(e){e.preventDefault();var t=a.state,n=t.username,r=t.password,o=t.passwordTwo,c=t.caloriesGoal;if(r!==o)a.setState({errors:{password:"Passwords must match!"}});else if(""===r||""===o)a.setState({errors:{password:"Password fields cannot be empty!"}});else if(r.length<6||o.length<6)a.setState({errors:{password:"Password must be longer than 6 characters!"}});else{var s={username:n,password:r,caloriesGoal:c};a.props.addUser(s),a.setState({username:"",password:"",passwordTwo:"",caloriesGoal:0,errors:{}}),window.location.href="/login"}},a.onChange=function(e){return a.setState(Object(Y.a)({},e.target.name,e.target.value))},a}return Object(d.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.state,t=e.username,a=e.password,n=e.passwordTwo,o=e.caloriesGoal,c=e.errors;return r.a.createElement(x.a,{className:"registerContainer"},r.a.createElement("h1",{className:"mainTitle"},r.a.createElement("span",{className:"titleDailyPart"},"Daily"),"Calories"),r.a.createElement("h3",{className:"subtitle"},"Register:"),r.a.createElement(K.a,{className:"registerForm",onSubmit:this.onSubmit},r.a.createElement(G.a,null,r.a.createElement(F.a,null,r.a.createElement(K.a.Group,null,r.a.createElement(K.a.Label,{className:"loginLabels"},"Username:"),r.a.createElement(K.a.Control,{name:"username",value:t,onChange:this.onChange,type:"text"}))),r.a.createElement(F.a,null,r.a.createElement(K.a.Group,null,r.a.createElement(K.a.Label,{className:"loginLabels"},"Daily Calories Goal:"),r.a.createElement(K.a.Control,{name:"caloriesGoal",value:o,onChange:this.onChange,type:"number"})))),r.a.createElement(G.a,null,r.a.createElement(F.a,null,r.a.createElement(K.a.Group,null,r.a.createElement(K.a.Label,{className:"loginLabels"},"Password:"),r.a.createElement(K.a.Control,{name:"password",value:a,onChange:this.onChange,type:"password"}))),r.a.createElement(F.a,null,r.a.createElement(K.a.Group,null,r.a.createElement(K.a.Label,{className:"loginLabels"},"Repeat Password:"),r.a.createElement(K.a.Control,{name:"passwordTwo",value:n,onChange:this.onChange,type:"password"})))),r.a.createElement("p",null,c.password),r.a.createElement(ve.a,{className:"loginButton",size:"lg",variant:"primary",type:"submit"},"Register")),r.a.createElement("a",{className:"registerLink",href:"/login"},"Already registered? Click here to log in now."))}}]),t}(n.Component)),Oe=Object(y.b)(null,{addUser:function(e){return function(){var t=Object(E.a)(b.a.mark(function t(a){var n;return b.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,S.a.post("".concat(D,"/users"),e);case 2:n=t.sent,a({type:"ADD_USER",payload:n.data});case 4:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()}})(ge),je=a(32),we=a(92),Ce=a(47),ke=a(18),De={food:[]},Ne={days:[]},Se={users:[],activeUser:{},error:""},Ie={loggedIn:!1},Ue=Object(je.c)({food:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:De,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_FOOD":return Object(ke.a)({},e,{food:t.payload});case"ADD_FOOD":return Object(ke.a)({},e,{food:[].concat(Object(Ce.a)(e.food),[t.payload])});case"DELETE_FOOD":return Object(ke.a)({},e,{food:e.food.filter(function(e){return e.id!==t.payload.id})});default:return e}},days:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ne,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_DAYS":return Object(ke.a)({},e,{days:t.payload});case"ADD_CALORIES":return Object(ke.a)({},e,{days:e.days.map(function(e){var a=parseInt(t.payload.foodCalories);return e.id===t.payload.dayId?Object(ke.a)({},e,{caloriesIn:a+e.caloriesIn}):e})});case"SUBTRACT_CALORIES":return Object(ke.a)({},e,{days:e.days.map(function(e){var a=parseInt(t.payload.calories);return e.id===t.payload.dayId?Object(ke.a)({},e,{caloriesIn:e.caloriesIn-a}):e})});default:return e}},users:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Se,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_USER":return Object(ke.a)({},e,{users:[t.payload].concat(Object(Ce.a)(e.users))});case g:return Object(ke.a)({},e,{activeUser:Object(ke.a)({},e.activeUser)});case O:return Object(ke.a)({},e,{activeUser:t.payload});case j:return Object(ke.a)({},e,{error:t.payload});case C:return Object(ke.a)({},e);default:return e}},auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ie;switch((arguments.length>1?arguments[1]:void 0).type){case w:return Object(ke.a)({},e,{loggedIn:!0});case k:return Object(ke.a)({},e,{loggedIn:!1});default:return e}}}),_e=[we.a],Ae=Object(je.e)(Ue,{},Object(je.d)(je.a.apply(void 0,_e),window.__REDUX_DEVTOOLS_EXTENSION__?window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__():function(e){return e})),Te=(a(172),a(173),function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={isLogged:!0},a}return Object(d.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){localStorage.getItem("token")||this.setState({isLogged:!1})}},{key:"componentDidUpdate",value:function(){this.state.isLogged||this.setState({isLogged:!0})}},{key:"render",value:function(){return r.a.createElement(y.a,{store:Ae},r.a.createElement(m.a,{basename:"/DailyCalories",history:U},r.a.createElement(p.d,null,r.a.createElement(p.b,{exact:!0,path:"/login",component:Ee}),r.a.createElement(p.b,{exact:!0,path:"/register",component:Oe}),r.a.createElement(h,{exact:!0,path:"/",component:he,authed:this.state.isLogged}))))}}]),t}(n.Component));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(Te,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},93:function(e,t,a){e.exports=a(174)},98:function(e,t,a){}},[[93,1,2]]]);
//# sourceMappingURL=main.b92b78f5.chunk.js.map